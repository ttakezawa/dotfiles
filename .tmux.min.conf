# SEE: https://stackoverflow.com/questions/35016458/how-to-write-if-statement-in-tmux-conf-to-set-different-options-for-different-t/40902312#40902312
run-shell "tmux setenv -g TMUX_VERSION $(tmux -V | cut -c 6-)"

set -g default-terminal "screen-256color"

set-option -g default-shell /bin/bash

set-option -g history-limit 100000

set -g prefix C-z
bind C-z send-prefix
unbind C-z
unbind C-b

setw -g mode-keys emacs
setw -g xterm-keys on
set -g wrap-search off

set -g mouse on

# toggle mouse mode (tmux-2.1)
bind m if "tmux show -g mouse | grep off" \
  "set -gq mouse on ; display mouse:on " \
  "set -gq mouse off; display mouse:off"

# split window
bind | split-window -h
bind - split-window -v

# " windowlist -b
unbind '"'
bind '"' choose-window

# set C-c/C-n/C-p/C-[
unbind C-n
bind   C-n next-window
unbind C-p
bind   C-p previous-window
unbind C-c
bind   C-c new-window
unbind C-[
bind   C-[ copy-mode

# pane control bindings (Via: https://github.com/tmux-plugins/tmux-pain-control/ )
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# vi like keybinding in copy-mode
if-shell -b 'bash -c "[[ $TMUX_VERSION < 2.4 ]]"' \
  'bind -t emacs-copy C-u page-up ; \
   bind -t emacs-copy C-d page-down ; \
   bind -t emacs-copy h cursor-left ; \
   bind -t emacs-copy j cursor-down ; \
   bind -t emacs-copy k cursor-up ; \
   bind -t emacs-copy l cursor-right ;'

if-shell -b 'bash -c "[[ $TMUX_VERSION > 2.4 || $TMUX_VERSION = 2.4 ]]"' \
  'bind-key -T copy-mode C-u send-keys -X page-up ; \
   bind-key -T copy-mode C-d send-keys -X page-down ; \
   bind-key -T copy-mode h send-keys -X cursor-left ; \
   bind-key -T copy-mode j send-keys -X cursor-down ; \
   bind-key -T copy-mode k send-keys -X cursor-up ; \
   bind-key -T copy-mode l send-keys -X cursor-right ;'
