### Please run
### echo 'source $HOME/.byobu-tmux.conf' >> ~/.byobu/.tmux.conf
###

# SEE: https://stackoverflow.com/questions/35016458/how-to-write-if-statement-in-tmux-conf-to-set-different-options-for-different-t/40902312#40902312
run-shell "tmux setenv -g TMUX_VERSION $(tmux -V | cut -c 6-)"

# Disable suspend-client key
unbind C-z

# default Mouse mode
set -g mouse off

# toggle mouse mode (tmux-2.1)
bind m if "tmux show -g mouse | grep off" \
  "set -gq mouse on ; display mouse:on " \
  "set -gq mouse off; display mouse:off"

# copy mode (add vi like binding)
setw -g mode-keys emacs

set -g wrap-search off

# set title of Terminal
set -g set-titles on
run-shell 'tmux set -g set-titles-string "$(cat /tmp/${USER}-host_type)"'

# To let emacs enable these bindings, disable default pane move bindings
unbind-key -n S-Up
unbind-key -n S-Down
unbind-key -n S-Left
unbind-key -n S-Right

# pane control bindings (Via: https://github.com/tmux-plugins/tmux-pain-control/ )
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# vi like keybinding in copy-mode
if-shell -b 'bash -c "[[ $TMUX_VERSION < 2.4 ]]"' \
  'bind -t emacs-copy C-u page-up ; \
   bind -t emacs-copy C-d page-down ; \
   bind -t emacs-copy h cursor-left ; \
   bind -t emacs-copy j cursor-down ; \
   bind -t emacs-copy k cursor-up ; \
   bind -t emacs-copy l cursor-right ;'

if-shell -b 'bash -c "[[ $TMUX_VERSION > 2.4 || $TMUX_VERSION = 2.4 ]]"' \
  'bind-key -T copy-mode C-u send-keys -X page-up ; \
   bind-key -T copy-mode C-d send-keys -X page-down ; \
   bind-key -T copy-mode h send-keys -X cursor-left ; \
   bind-key -T copy-mode j send-keys -X cursor-down ; \
   bind-key -T copy-mode k send-keys -X cursor-up ; \
   bind-key -T copy-mode l send-keys -X cursor-right ;'
